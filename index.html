<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Basic Page Settings -->
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Title and Description -->
    <title>UltraTiers</title>
    <meta name="description" content="UltraTiers lets you track Minecraft players PvP/Building skills and ranks with awesome tier leaderboards. See who's the best in every mode and subject!">
    <meta name="keywords" content="Minecraft, PvP, tierlist, leaderboard, building, UltraTiers, rankings, performance">
    <meta name="author" content="UltraTiers Team">

    <!-- Theme Color (Browsers & Mobile) -->
    <meta name="theme-color" content="#1e293b">

    <!-- Open Graph / Facebook -->
    <meta property="og:title" content="UltraTiers - Minecraft PvP Tierlist">
    <meta property="og:description" content="Track the PvP/Building performance of every Minecraft player in UltraTiers and see the top rankings in every mode and subject.">
    <meta property="og:image" content="Trophy_Icon.png">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://ultratiers.onrender.com/">

    <!-- Twitter Card -->
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="UltraTiers - Minecraft PvP Tierlist">
    <meta name="twitter:description" content="Track the PvP/Building performance of every Minecraft player in UltraTiers and see the top rankings in every mode and subject.">
    <meta name="twitter:image" content="Trophy_Icon.png">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="Trophy_Icon.png">
    <link rel="apple-touch-icon" href="Trophy_Icon.png">

    <!-- Stylesheets -->
    <link rel="stylesheet" href="styles.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
</head>
<body>

<!-- LOGIN SCREEN -->
<div id="site-lock">
  <div class="lock-box">
    <h2>UltraTiers Developer Login</h2>
    <input type="text" id="dev-username" placeholder="Username">
    <input type="password" id="dev-password" placeholder="Password">
    <button onclick="login()">Login</button>
    <p id="login-error"></p>
  </div>
</div>

<div id="site-content" style="display:none;">

<!-- Floating navbar (new) -->
<div class="floating-navbar" id="floating-navbar">
  <div class="floating-inner">
    <div class="float-left">
      <img src="UltraTiers_White.png" class="float-logo" alt="UltraTiers">
    </div>

    <div class="float-center">
      <nav class="float-links">
        <a href="#home-section">Home</a>
        <a href="#leaderboard-section">Rankings</a>
        <a href="#kits-section">Kits</a>
        <a href="#builders-section">Builders</a>
      </nav>
    </div>

    <div class="float-right">
      <div class="float-search">
        <i class="fas fa-search"></i>
        <input placeholder="Search player..." id="float-search-input" />
      </div>

      <div class="float-menu" id="float-menu">
        <button class="menu-btn" id="menu-btn-main">Main</button>
        <button class="menu-btn" id="menu-btn-sub">Sub</button>
        <button class="menu-btn" id="menu-btn-extra">Extra</button>
        <button class="menu-btn" id="menu-btn-bonus">Bonus</button>
      </div>
    </div>
  </div>
</div>

<!-- LOADING SCREEN -->
<div id="loading-screen" class="loading-screen">
  <div class="loading-spinner">
    <div class="spinner"></div>
    <p>Loading...</p>
  </div>
</div>

<header>
<nav class="navbar">
    <div class="nav-left">
        <img src="UltraTiers_White.png" class="logo-img" style="cursor: pointer;">
    </div>

    <div class="nav-center">
    </div>

<div class="nav-right">
<div class="auth-buttons" id="auth-buttons">
  <button id="login-btn">
    <i class="fas fa-sign-in"></i>
  </button>
</div>
<div class="user-profile-dropdown hidden" id="user-profile-dropdown">
  <img id="user-avatar" src="" alt="Avatar" class="user-avatar">

<div class="profile-menu" id="profile-menu">
  <div id="settings-btn"><i class="fas fa-cog"></i> Settings</div>
  <div id="logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</div>
</div>
</div>


  <div class="search-wrapper">
    <i class="fas fa-search"></i>
    <input class="searchbar" placeholder="Search fighter..." id="search-input">
  </div>
</div>
</nav>
</header>

<!-- LEADERBOARD SECTION -->
<div id="home-section" class="home-section active-section">
  <div class="home-hero">
    <div class="hero-content">
      <h1 class="hero-title">
        <span class="title-icon">ğŸ†</span>
        UltraTiers
      </h1>
      <p class="hero-subtitle">Track the best Minecraft PvP & Building performance</p>
    </div>
  </div>

  <div class="home-grid">
    <!-- PvP SECTION -->
    <!-- Fighters Card -->
    <div class="home-card fighters-card" data-section="rankings">
      <div class="card-icon">âš”ï¸</div>
      <h3 class="card-title">Fighters</h3>
      <p class="card-description">View the top PvP fighters across all modes and regions</p>
      <div class="card-stats">
        <span id="home-fighter-count">0</span> Tested
      </div>
      <button class="card-button">View Rankings</button>
    </div>

    <!-- Leaderboards Card -->
    <div class="home-card leaderboards-card" data-section="leaderboards">
      <div class="card-icon">ğŸ“Š</div>
      <h3 class="card-title">Fighter Leaderboards</h3>
      <p class="card-description">Browse leaderboards for each individual PvP mode</p>
      <div class="card-stats">
        Per-mode rankings
      </div>
      <button class="card-button">View Leaderboards</button>
    </div>

    <!-- Modes Card -->
    <div class="home-card modes-card" data-section="modes">
      <div class="card-icon">ğŸ®</div>
      <h3 class="card-title">Gamemodes</h3>
      <p class="card-description">Browse all 4 Categories of PvP</p>
      <div class="card-stats">
        <span>27</span> Modes
      </div>
      <button class="card-button">Explore Modes</button>
    </div>

    <!-- Testers Card -->
    <div class="home-card testers-card" data-section="testers">
      <div class="card-icon">ğŸ§ª</div>
      <h3 class="card-title">Official Testers</h3>
      <p class="card-description">Meet the official UltraTiers testers</p>
      <div class="card-stats">
        Filter by mode & region
      </div>
      <button class="card-button">View Testers</button>
    </div>

    <!-- BUILDING SECTION -->
    <!-- Builders Card -->
    <div class="home-card builders-card" data-section="builders">
      <div class="card-icon">ğŸ—ï¸</div>
      <h3 class="card-title">Builders</h3>
      <p class="card-description">Explore the best builders by subject and region</p>
      <div class="card-stats">
        <span id="home-builder-count">0</span> Tested
      </div>
      <button class="card-button">View Builders</button>
    </div>

    <!-- Builder Leaderboards Card -->
    <div class="home-card builder-leaderboards-card" data-section="builder-leaderboards">
      <div class="card-icon">ğŸ“Š</div>
      <h3 class="card-title">Builder Leaderboards</h3>
      <p class="card-description">Browse leaderboards for each individual building subject</p>
      <div class="card-stats">
        Per-subject rankings
      </div>
      <button class="card-button">View Leaderboards</button>
    </div>
    <div class="home-card docs-card" data-section="docs">
      <div class="card-icon">ğŸ“š</div>
      <h3 class="card-title">Documentation</h3>
      <p class="card-description">Learn about tier system and points</p>
      <div class="card-stats">
        Tiers 1-5
      </div>
      <button class="card-button">Read Docs</button>
    </div>

    <!-- Application Card -->
    <div class="home-card application-card" data-section="application">
      <div class="card-icon">ğŸ“</div>
      <h3 class="card-title">Apply Now</h3>
      <p class="card-description">Become an official UltraTiers tester</p>
      <div class="card-stats">
        Quick & Easy
      </div>
      <button class="card-button">Apply Today</button>
    </div>

      <!-- Statistics Card -->
<div class="home-card stats-card" data-section="stats">
  <div class="card-icon">ğŸ“Š</div>
  <h3 class="card-title">Statistics</h3>
  <p class="card-description">Global UltraTiers analytics</p>
  <div class="card-stats">Live data</div>
  <button class="card-button">View Stats</button>
</div>

<!-- Kits Card -->
<div class="home-card kits-card" data-section="kits">
  <div class="card-icon">ğŸ§°</div>
  <h3 class="card-title">Kits</h3>
  <p class="card-description">Browse all official PvP kits</p>
  <div class="card-stats">
    View all kits
  </div>
  <button class="card-button">View Kits</button>
</div>
  </div>

  <div class="home-footer">
    <p>Join our <a href="https://discord.gg/Bvebb7RwaG" target="_blank" class="discord-link"><i class="fab fa-discord"></i> Discord</a> for updates and community</p>
  </div>
</div>

<!-- TIER PAGE SECTION -->
<div id="tier-page-section" class="tier-page-section hidden-section">
  <div class="tier-page-header">
    <button class="tier-back-btn" id="tier-back-btn">â† Back</button>
    <h2 class="tier-page-title" id="tier-page-title">Main</h2>
  </div>
  <div class="tier-mode-buttons" id="tier-mode-buttons"></div>
  <div class="tier-page-content" id="tier-page-content"></div>
</div>

<div id="leaderboard-section" class="leaderboard hidden-section">
        <div class="header-container">
    <div colspan="4" class="header-message">
        Join our discord for more updates!
    </div>
    </div>

    <!-- Fighter Region Tabs -->
    <div class="fighters-region-tabs">
      <button class="fighters-region-tab-btn active" data-fighter-region="global">ğŸŒ Global</button>
      <button class="fighters-region-tab-btn" data-fighter-region="NA">ğŸŒ North America</button>
      <button class="fighters-region-tab-btn" data-fighter-region="EU">ğŸŒ Europe</button>
      <button class="fighters-region-tab-btn" data-fighter-region="AS">ğŸŒ Asia</button>
      <button class="fighters-region-tab-btn" data-fighter-region="SA">ğŸŒ South America</button>
      <button class="fighters-region-tab-btn" data-fighter-region="ME">ğŸŒ Middle East</button>
      <button class="fighters-region-tab-btn" data-fighter-region="AU">ğŸŒ Australia</button>
      <button class="fighters-region-tab-btn" data-fighter-region="AF">ğŸŒ Africa</button>
    </div>

    <!-- Mode Category Tabs -->
    <div class="leaderboard-mode-tabs">
      <button class="leaderboard-mode-tab-btn" data-mode-category="overall">Overall</button>
      <button class="leaderboard-mode-tab-btn active" data-mode-category="main">Main</button>
      <button class="leaderboard-mode-tab-btn" data-mode-category="sub">Sub</button>
      <button class="leaderboard-mode-tab-btn" data-mode-category="extra">Extra</button>
      <button class="leaderboard-mode-tab-btn" data-mode-category="bonus">Bonus</button>
    </div>

<div class="table-header">
    <!-- players generated -->
</div>

    <div id="players-container"></div>
</div>

<!-- KITS SECTION -->
<section id="kits-section" class="kits-section hidden-section">
  <h1 class="kits-title">ğŸ§° PvP Kits</h1>
  <p class="kits-subtitle">All official UltraTiers kits</p>

  <div class="kits-grid" id="kits-grid">
    <!-- Kit cards generated here -->
  </div>
</section>


<!-- Builders section -->
<section id="builders-section" class="builders-section hidden-section">
          <div class="header-container">
    <div colspan="4" class="header-message">
        Join our discord for more updates!
    </div>
    </div>

    <!-- Builder Region Tabs -->
    <div class="builders-region-tabs">
      <button class="builders-region-tab-btn active" data-builder-region="global">ğŸŒ Global</button>
      <button class="builders-region-tab-btn" data-builder-region="NA">ğŸŒ North America</button>
      <button class="builders-region-tab-btn" data-builder-region="EU">ğŸŒ Europe</button>
      <button class="builders-region-tab-btn" data-builder-region="AS">ğŸŒ Asia</button>
      <button class="builders-region-tab-btn" data-builder-region="SA">ğŸŒ South America</button>
      <button class="builders-region-tab-btn" data-builder-region="ME">ğŸŒ Middle East</button>
      <button class="builders-region-tab-btn" data-builder-region="AU">ğŸŒ Australia</button>
      <button class="builders-region-tab-btn" data-builder-region="AF">ğŸŒ Africa</button>
    </div>

    <div class="builders-table-header">
        <!-- builders generated -->
    </div>
    <!-- ADD THIS DIV -->
    <div id="builders-container" class="builders-grid"></div>
</section>

<section id="stats-section" class="stats-section hidden-section"></section>

<!-- TESTERS SECTION -->
<div id="testers-section" class="testers-section hidden-section">

  <h1 class="testers-title">ğŸ§ª Official Testers</h1>
  <p class="testers-subtitle">
    These players are official UltraTiers testers for each mode and region.
  </p>

  <!-- Filters (optional for scripts later) -->
  <div class="testers-filters">
    <select id="tester-mode-filter">
      <option value="">All Modes</option>
    </select>

    <select id="tester-region-filter">
      <option value="">All Regions</option>
      <option value="NA">NA</option>
      <option value="EU">EU</option>
      <option value="AS">AS</option>
      <option value="SA">SA</option>
      <option value="ME">ME</option>
      <option value="AU">AU</option>
      <option value="AF">AF</option>
    </select>
  </div>

  <!-- Testers Grid -->
  <div id="testers-container" class="testers-grid">
    <!-- testers generated by script -->
  </div>

</div>

<div id="profile-designer-modal" class="modal">
  <div class="modal-box profile-designer">

    <div class="profile-card-preview" id="profile-card">
      <div class="profile-banner" id="profile-banner">
        <i class="fas fa-pencil edit-banner-btn" id="edit-banner-btn"></i>
      </div>

      <div class="profile-card-body">
        <img id="designer-avatar" class="designer-avatar" />
        <h3 id="designer-name">Player</h3>
      </div>
    </div>

    <div class="banner-selector hidden" id="banner-selector">
      <h4>Select Banner</h4>
      <div class="banner-options">
        <img src="anime-style-stone.jpg" data-banner="anime-style-stone.jpg">
        <img src="anime-style-clouds.jpg" data-banner="anime-style-clouds.jpg">
        <img src="anime-style-forest.jpg" data-banner="anime-style-forest.jpg">
        <img src="anime-style-planet.jpg" data-banner="anime-style-planet.jpg">
        <img src="anime-style-snow.jpg" data-banner="anime-style-snow.jpg">
        <img src="anime-style-pumpkin.jpg" data-banner="anime-style-pumpkin.jpg">
      </div>
    </div>

    <button id="close-designer">Close</button>
  </div>
</div>

<section id="modes-section" class="modes-section hidden-section">
    <h1>ğŸ® Gamemodes</h1>
    <div class="modes-categories-container" id="modes-categories-container">
        <!-- Mode categories will be generated here -->
    </div>
</section>

<!-- LEADERBOARDS SECTION -->
<div id="leaderboards-section" class="leaderboards-section hidden-section">
    <div class="leaderboards-mode-buttons" id="leaderboards-mode-buttons">
        <!-- Mode buttons will be generated here -->
    </div>
    <div id="leaderboards-container" class="leaderboards-container"></div>
</div>

<!-- BUILDER LEADERBOARDS SECTION -->
<div id="builder-leaderboards-section" class="leaderboards-section hidden-section">
    <div class="leaderboards-mode-buttons" id="builder-leaderboards-mode-buttons">
        <!-- Subject buttons will be generated here -->
    </div>
    <div id="builder-leaderboards-container" class="leaderboards-container"></div>
</div>

<!-- DOCS SECTION -->
<div id="docs-section" class="docs-section hidden-section">
    <h1>ğŸ“š Minecraft Tiers Documentation</h1>
    <p>This section explains all Minecraft tiers.</p>

    <div id="tier-docs-container" class="tier-docs"></div>
</div>

<!-- APPLICATION SECTION -->
<div id="application-section" class="application-section hidden-section">
    <h1>ğŸ“ Tester Application</h1>
    <p>Apply to become an UltraTiers tester by filling out the form below.</p>

    <form class="application-form">
        <!-- Discord Username -->
        <div class="form-group">
            <label for="discord">Discord Username</label>
            <input type="text" id="discord" placeholder="username#0000" required>
        </div>

        <!-- Minecraft IGN -->
        <div class="form-group">
            <label for="ign">Minecraft IGN</label>
            <input type="text" id="ign" placeholder="PlayerName" required>
        </div>

        <!-- Modes -->
        <div class="form-group">
            <label for="modes">Modes You Want to Test</label>
            <input type="text" id="modes" placeholder="Axe, Sword, UHC, etc" required>
        </div>

        <!-- Explanation -->
        <div class="form-group">
            <label for="reason">Why do you want to be a tester?</label>
            <textarea id="reason" rows="5" placeholder="Explain why you'd be a good tester..." required></textarea>
        </div>

        <!-- Region -->
        <div class="form-group">
            <label for="region">Your Region</label>
            <select id="region" required>
                <option value="">Select your region</option>
                <option value="NA">North America</option>
                <option value="EU">Europe</option>
                <option value="AS">Asia</option>
                <option value="ME">Middle East</option>
                <option value="AU">Australia</option>
                <option value="SA">South America</option>
                <option value="AF">Africa</option>
            </select>
        </div>

        <!-- Submit -->
        <button type="submit" class="application-submit">
            Submit Application
        </button>
    </form>
</div>

<!-- AUTH MODAL -->
<div id="auth-modal" class="modal">
  <div class="modal-box">
    <h2 id="auth-title">Account Login</h2>
<form class="auth-form">
  <input id="auth-ign" placeholder="Minecraft IGN" required>
  <input id="auth-code" placeholder="Login Code" required>
  <div class="auth-button-container">
    <button type="submit">Submit</button>
    <button type="button" id="auth-cancel">Cancel</button>
  </div>
</form>
  </div>
</div>

<!-- MODAL -->
<div id="modal" class="modal">
    <div class="modal-box">
        <h2 id="modal-title">Player Name</h2>
        <p id="modal-content">Points / Tiers info</p>
        <button id="close-modal">Close</button>
    </div>
</div>

<footer class="footer">
    Â© Copyright 2025 UltraTiers
    <br>
    <span id="player-count" class="margin-top-playercount"></span>
</footer>

</div>

<!-- SCRIPT -->
<script>
// Helper function to truncate player names
function truncateName(name, maxLength = 15) {
  if (name.length > maxLength) {
    return name.substring(0, maxLength - 3) + '...';
  }
  return name;
}

// Get emoji for mode
function getModeEmoji(mode) {
  const modeEmojis = {
    "Vanilla": "ğŸ®",
    "UHC": "â¤ï¸",
    "Pot": "ğŸ§ª",
    "NethOP": "ğŸ‘¾",
    "SMP": "âš”ï¸",
    "Sword": "âš”ï¸",
    "Axe": "ğŸª“",
    "Mace": "ğŸ”¨",
    "Minecart": "ğŸš‚",
    "Diamond Survival": "ğŸ’",
    "DeBuff": "ğŸ’œ",
    "Elytra": "ğŸ¦…",
    "Speed": "âš¡",
    "Creeper": "ğŸ’¥",
    "Manhunt": "ğŸƒ",
    "Diamond SMP": "ğŸ’",
    "Bow": "ğŸ¹",
    "Bed": "ğŸ›ï¸",
    "OG Vanilla": "ğŸ®",
    "Trident": "ğŸ”±",
    "Spear Elytra": "ğŸ¦…",
    "Spear Mace": "ğŸ”¨",
    "AxePot": "ğŸª“",
    "Sumo": "ğŸ‘Š",
    "OP": "ğŸ’ª",
    "Bridge": "ğŸŒ‰",
    "Pearl": "âšª"
  };
  return modeEmojis[mode] || "ğŸ®";
}

// Menu button functionality with full-page tier display
(function(){
  const mainBtn = document.getElementById('menu-btn-main');
  const subBtn = document.getElementById('menu-btn-sub');
  const extraBtn = document.getElementById('menu-btn-extra');
  const bonusBtn = document.getElementById('menu-btn-bonus');
  const backBtn = document.getElementById('tier-back-btn');
  const tierPageContent = document.getElementById('tier-page-content');
  const tierPageTitle = document.getElementById('tier-page-title');
  const tierModeButtons = document.getElementById('tier-mode-buttons');
  const tierPageSection = document.getElementById('tier-page-section');
  const homeSection = document.getElementById('home-section');

  // Map category to modes from script.js
  const modesCategoryMap = {
    main: ["Vanilla", "UHC", "Pot", "NethOP", "SMP", "Sword", "Axe", "Mace"],
    sub: ["Minecart", "Diamond Survival", "DeBuff", "Elytra", "Speed", "Creeper", "Manhunt", "Diamond SMP", "Bow", "Bed", "OG Vanilla", "Trident", "Spear Elytra", "Spear Mace"],
    extra: ["AxePot", "Sumo", "OP"],
    bonus: ["Bridge", "Pearl"]
  };

  function showTierPage() {
    // Hide all sections
    document.querySelectorAll('.active-section').forEach(s => s.classList.remove('active-section'));
    document.querySelectorAll('[class*="section"]').forEach(s => s.classList.add('hidden-section'));
    // Show tier page
    tierPageSection.classList.remove('hidden-section');
    tierPageSection.classList.add('active-section');
    window.scrollTo(0, 0);
  }

  function showHomePage() {
    // Hide all sections
    document.querySelectorAll('.active-section').forEach(s => s.classList.remove('active-section'));
    document.querySelectorAll('[class*="section"]').forEach(s => s.classList.add('hidden-section'));
    // Show home
    homeSection.classList.remove('hidden-section');
    homeSection.classList.add('active-section');
    window.scrollTo(0, 0);
  }

  function getPlayersByTier(category) {
    if (!window.players || window.players.length === 0) return {};
    
    const modes = modesCategoryMap[category] || [];
    
    // Filter players that have tiers in this category
    const filteredPlayers = window.players.filter(p => 
      p.tiers && p.tiers.some(t => modes.includes(t.gamemode))
    );

    // Group players by tier (1, 2, 3, 4, 5)
    const tierGroups = {
      1: [],
      2: [],
      3: [],
      4: [],
      5: []
    };

    filteredPlayers.forEach(player => {
      const playersMetTiers = new Set();
      player.tiers.forEach(t => {
        if (modes.includes(t.gamemode)) {
          const tierNum = t.tier.match(/\d+/)?.[0];
          if (tierNum) {
            playersMetTiers.add(tierNum);
          }
        }
      });
      
      // Add player to each tier they have
      playersMetTiers.forEach(tier => {
        if (tierGroups[tier]) {
          tierGroups[tier].push(player);
        }
      });
    });

    // Remove duplicates and sort by points
    Object.keys(tierGroups).forEach(tier => {
      const seen = new Set();
      tierGroups[tier] = tierGroups[tier]
        .filter(p => {
          if (seen.has(p.name)) return false;
          seen.add(p.name);
          return true;
        })
        .sort((a, b) => b.points - a.points)
        .slice(0, 15); // Show up to 15 per tier
    });

    return tierGroups;
  }

  function renderModeButtons(category) {
    tierModeButtons.innerHTML = '';
    const modes = modesCategoryMap[category] || [];
    
    const modesContainer = document.createElement('div');
    modesContainer.className = 'tier-modes-container';

    modes.forEach(mode => {
      const btn = document.createElement('button');
      btn.className = 'tier-mode-btn';
      btn.textContent = mode;
      btn.title = mode;
      modesContainer.appendChild(btn);
    });

    tierModeButtons.appendChild(modesContainer);
  }

  function renderTierView(category, categoryName) {
    tierPageTitle.textContent = categoryName;
    tierPageContent.innerHTML = '';
    const tierGroups = getPlayersByTier(category);
    
    const tierContainer = document.createElement('div');
    tierContainer.className = 'tier-display-full';

    const tierColors = {
      1: 'tier-1',
      2: 'tier-2',
      3: 'tier-3',
      4: 'tier-4',
      5: 'tier-5'
    };

    for (let i = 1; i <= 5; i++) {
      const tierCol = document.createElement('div');
      tierCol.className = `tier-column-full ${tierColors[i]}`;
      
      const tierHeader = document.createElement('div');
      tierHeader.className = 'tier-header-full';
      tierHeader.innerHTML = `ğŸ† Tier ${i}`;
      tierCol.appendChild(tierHeader);

      const playersList = document.createElement('div');
      playersList.className = 'tier-players-full';

      const players = tierGroups[i] || [];
      if (players.length === 0) {
        const empty = document.createElement('div');
        empty.className = 'player-empty-full';
        empty.textContent = 'No players';
        playersList.appendChild(empty);
      } else {
        players.forEach(player => {
          const playerEl = document.createElement('div');
          playerEl.className = 'tier-player-item-full';
          playerEl.innerHTML = `
            <img src="https://render.crafty.gg/3d/bust/${player.uuid}" alt="${player.name}" class="tier-player-avatar-full">
            <span class="tier-player-name-full" title="${player.name}">${truncateName(player.name)}</span>
          `;
          playersList.appendChild(playerEl);
        });
      }

      tierCol.appendChild(playersList);
      tierContainer.appendChild(tierCol);
    }

    tierPageContent.appendChild(tierContainer);
  }

  // Button click handlers
  const buttons = [
    { el: mainBtn, category: 'main', name: 'Main' },
    { el: subBtn, category: 'sub', name: 'Sub' },
    { el: extraBtn, category: 'extra', name: 'Extra' },
    { el: bonusBtn, category: 'bonus', name: 'Bonus' }
  ];

  buttons.forEach(btn => {
    if (btn.el) {
      btn.el.addEventListener('click', function(e){
        e.stopPropagation();
        renderModeButtons(btn.category);
        renderTierView(btn.category, btn.name);
        showTierPage();
      });
    }
  });

  // Back button
  if (backBtn) {
    backBtn.addEventListener('click', function() {
      showHomePage();
    });
  }
})();

// Simple search: mirror float search into main search input
(function() {
  const floatSearch = document.getElementById('float-search-input');
  const mainSearch = document.getElementById('search-input');
  if (floatSearch && mainSearch) {
    floatSearch.addEventListener('input', function() {
      mainSearch.value = floatSearch.value;
    });
  }
})();
</script>
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script src="lock.js"></script>
<script type="module" src="script.js"></script>
</body>
</html>
